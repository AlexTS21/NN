<!DOCTYPE html>
<html>
<head>
    <title>Nn</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'animation/css/style.css' %}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    {% csrf_token %}
    <div class="alert-container" id="alert-container"></div>
    <div class="controls">
        <div id="right-controls">
            <a>NEURAL<br>NETWORK</a>
        </div>
        <div id="left-controls">
            <input type="file" id="csvFileInput" accept=".csv" hidden />
            <label for="csvFileInput" class="custom-file-label" id="csvFIL">UPLOAD CSV</label>
            <button class="ctr-btn" id="apl-btn" onclick="aply()">APLY</button>
            <button class="ctr-btn" id="play-btn">TRAIN</button>
            <button class="ctr-btn" onclick="toggleSlides()">EVALUATE</button>
        </div>   
    </div>
    <div class="container">
       
        <div id="left-cont">
            <div class="cont" id="parameters-container">

                <div id="inout">
                    <div>
                        <label for="x-inp" class="xyinp-lb">X</label>
                        <input type="text" id="x-inp" class="inp-xy" placeholder="Columnas del csv (x, x1, x2)">
                    </div>
                    <div>
                        <label for="y-inp" class="xyinp-lb">Y</label>
                        <div>
                             <input type="text" id="y-inp" class="inp-xy" placeholder="Columnas del csv (x, x1, x2)">
                        <select>
                            <option value="relu">ReLU</option>
                            <option value="sigmoid">Sigmoid</option>
                            <option value="tanh">Tanh</option>
                        </select>
                        </div>
                       
                    </div>
                </div>
                <div class="pr-cont-4">
                    <div>
                        <label id="aprlb" for="aprendizaje">LEARNING RATE</label>
                        <input type="number" id="aprendizaje" min="1" max="10"  placeholder="0.001">
                    </div>
                    <div>
                        <label for="test">TEST</label>
                        <input type="number" id="test" min="1" max="100"  placeholder="80">
                    </div>
                    <div>
                        <label for="iterations">EPOCH</label>
                        <input type="number" id="iterations" min="1" max="200"  placeholder="100">
                    </div>
                    <div id="norm-round-contr">
                        <!--agregar la normalizacion y funcion de activacion de la ultima capa-->
                        <label>
                            <input type="checkbox" id="normalizacion">
                            Normalizate
                        </label>
                        <label>
                            <input type="checkbox" id="round">
                            Round Output
                        </label>

                       
                    </div>
                </div>
              
            </div>
            <div class="cont" id="animation-container">
                <svg id="nn-svg" width="100%" height="600"></svg>
            </div>
        </div>
        <div id="right-cont">
            <div id="arch-cont" class="cont">
                <div class="slide-wrapper">

                
                    <div class="slide slide1">
                        <a class="titleC" >HIDDEN LAYERS</a>
                        <div class="tabla-container">
                            <table id="cTable">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Nc</th>
                                        <th>Activación</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Filas dinámicas -->
                                </tbody>
                            </table>
                        </div>
                        <div class="controlsCT">
                            <button class="add-btn" onclick="agregarFila()">+</button>
                            <input type="number" id="filaABorrar" min="1" placeholder="LAYER">
                            <button class="add-btn" onclick="borrarFila()">-</button>
                        </div>
                    </div>
                    
                    <div class="slide slide2">
                        <a class="titleC" >EVALUATE</a>
                        <!--ESTADISTICAS-->
                        <label for="x-inp" class="xyinp-lb">X</label>
                        <input type="text" id="x-inp" class="inp-xy" placeholder="Columnas del csv (x, x1, x2)">
                        <button>EVALUATE</button>
                    </div>
                </div> 
                    
            </div>
            <div id="chart-container" class="cont" style="width: 100%; height: 400px;"></div>
        </div>
       
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'animation/js/script.js' %}"></script>
    
    <script>
        // CSRF Token handling
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrftoken = getCookie('csrftoken');
    </script>
</body>
</html>